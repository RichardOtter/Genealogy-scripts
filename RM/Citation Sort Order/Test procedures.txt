Test Procedure for:
Change Citation Sort Order


Preliminaries
*	RMPy package needs testing- config file location, name, contents


Procedure

Configuration
DB	normal
report name	normal
display app		notepad
Start app in VSCode using control+ F5, using configuration
that adds config_testdata.ini as command line argument.

-------------------------------------------DIV50--
Setup

Action:		Run script "repo Genealogy-scripts\dev util scripts\_DB get fresh copy of TestData.cmd"
Expect:		Modification date of
			TEST-Citation Sort Order.rmtree
			and
			BACKUP_TEST-Citation Sort Order.rmtreeBU
			are updated

-------------------------------------------------------------------------DIV80--
1	Test Case
Entering RIN

Action:		Start app	(open file in view, select it, type  Control+ F5)
Expect:		Enter the RIN of the person who has the citations to reorder, or q to quit:

SETUP DEFINITION: The above will be called the RIN prompt.
To get here, call it setup-RIN-prompt.

Action:		type: 4{ENTER}
Expect:		RIN= 4  person's primary name is:  name-g name-s-(tree2)-#4 

Is the citation list that is to be re-ordered attached to:
a Fact (f), a Name (n) the Person (p) or quit app (q)?:

Action:		type: q{ENTER}
Expect:		App exists and report file displays in NotePad
			Report file:
			Header
			RIN= 4  person's primary name is:  name-g name-s-(tree2)-#4 


-------------------------------------------------------------------------DIV80--
2	Test Case
Entering q command at RIN prompt

-------------------------------------------DIV50--
Setup:		setup-RIN prompt

Action:		type: q{ENTER}
Expect:		App exists and report file displays in NotePad
			Report file:
			Header

-------------------------------------------------------------------------DIV80--
3	Test Case
Entering anything besides a valid RIN or q at RIN prompt

-------------------------------------------DIV50--
Setup:		setup-RIN prompt

Action:		type: 500{ENTER}
Expect:		The number entered is not a valid RIN in this database.
			Enter the RIN of the person who has the citations to reorder, or q to quit:

Action:		type: -4{ENTER}
Expect:		The number entered is not a valid RIN in this database.
			Enter the RIN of the person who has the citations to reorder, or q to quit:

Action:		type: 2.2{ENTER}
Expect:		Cannot interpret the response. Enter an integer or "q"
			Enter the RIN of the person who has the citations to reorder, or q to quit:

Action:		type: t{ENTER}
Expect:		Cannot interpret the response. Enter an integer or "q"
			Enter the RIN of the person who has the citations to reorder, or q to quit:

Action:		type: {CONTROL+C}
Expect:		KeyboardInterrupt
			App exists and report file displays in NotePad
			Report file:
			Header


-------------------------------------------------------------------------DIV80--
4	Test Case
Attachment prompt enter s or invalid response

-------------------------------------------DIV50--
Setup:		setup-RIN prompt

Action:		type: 4{ENTER}
Expect:		RIN= 4  person's primary name is:  name-g name-s-(tree2)-#4 
	Is the citation list that is to be re-ordered attached to:
	a Fact (f), a Name (n) the Person (p) or quit app (q)?:

SETUP DEFINITION: The above will be called the attachment-prompt.
To get here, call it setup-attachment-prompt-RIN-#4   (the number determines the initial RIN selected).


Action:		type: s{ENTER}
Expect:		Enter the RIN of the person who has the citations to reorder, or q to quit:


-------------------------------------------DIV50--
Setup:		setup-attachment-prompt-RIN-#4		(the RIN number may vary)

Action:		type: q{ENTER}
Expect:		q is not understood.
			Enter one of:  f, n, p, s     (s will skip this RIN).
			Is the citation list that is to be re-ordered attached to:
			a Fact (f), a Name (n) the Person (p) or skip this RIN (s)?:

Action:		type: 1{ENTER}
Expect:		1 is not understood.
			Enter one of:  f, n, p, s     (s will skip this RIN).
			Is the citation list that is to be re-ordered attached to:
			a Fact (f), a Name (n) the Person (p) or skip this RIN (s)?:


-------------------------------------------------------------------------DIV80--
5	Test Case
citation list attached to a Fact - multiple facts.
Stop at the re-order process.

-------------------------------------------DIV50--
Setup:		setup-attachment-prompt-RIN-#3

Action:		type: f{ENTER}
Expect:		3 events found having more than 1 attached citation.
			1    Death          : 1980           sample death detail
			2    Burial         : 30 Jan 2000
			3    Residence      : aft 2000       sample residence detail
			Which fact's citations will be re-ordered?

Action:		type: 4{ENTER}
Expect:		Enter a number 1-3
			Which fact's citations will be re-ordered?

Action:		type: 0{ENTER}
Expect:		Enter a number 1-3
			Which fact's citations will be re-ordered?

Action:		type: -2{ENTER}
Expect:		Enter a number 1-3
			Which fact's citations will be re-ordered?

Action:		type: 1.2{ENTER}
Expect:		Enter a number 1-3
			Which fact's citations will be re-ordered?

Action:		type: -q{ENTER}
Expect:		Enter a number 1-3
			Which fact's citations will be re-ordered?

Action:		type: -s{ENTER}
Expect:		Enter a number 1-3
			Which fact's citations will be re-ordered?

Action:		type: {CONTROL+C}
Expect:		KeyboardInterrupt
			App exists and report file displays in NotePad
			Report file:
			Header

-------------------------------------------DIV50--
Setup:		setup-attachment-prompt-RIN-#3

Action:		type: f{ENTER}
Expect:		3 events found having more than 1 attached citation.
			1    Death          : 1980           sample death detail
			2    Burial         : 30 Jan 2000
			3    Residence      : aft 2000       sample residence detail
			Which fact's citations will be re-ordered?

Action:		type: -1{ENTER}
Expect:		------------------------------------------------------
			To re-order citations, at each prompt, enter one of:
			*  the number of the citation that should go into this slot.
			* or
			*  nothing    to accept current line as it is.
			*  s          to accept current and following slots as they are.
			*  a          to abort and make no changes.
			------------------------------------------------------
			1     ('Source-3 based on template ATLAS', 'Citation-1 in Source-3 based on ATLAS')
			2     ('Source-3 based on template ATLAS', 'Citation-2 in Source-3 based on ATLAS')
			3     ('Source-3 based on template ATLAS', 'Citation-3 in Source-3 based on ATLAS')
			4     ('Source-2 based on template ATLAS', 'Citation-4 in Source-2 based on ATLAS')
			Which line should be swapped into position # 1 :

Action:		type: {CONTROL+C}
Expect:		KeyboardInterrupt
			App exists and report file displays in NotePad
			Report file:
			Header


-------------------------------------------DIV50--
Setup:		setup-attachment-prompt-RIN-#3

Action:		type: f{ENTER}
Expect:		3 events found having more than 1 attached citation.
			1    Death          : 1980           sample death detail
			2    Burial         : 30 Jan 2000
			3    Residence      : aft 2000       sample residence detail
			Which fact's citations will be re-ordered?

Confirm:	Birth fact is not listed.

Action:		type: -2{ENTER}
------------------------------------------------------
To re-order citations, at each prompt, enter one of:
*  the number of the citation that should go into this slot.
* or
*  nothing    to accept current line as it is.
*  s          to accept current and following slots as they are.
*  a          to abort and make no changes.
------------------------------------------------------
1     ('Source-2 based on template ATLAS', 'Citation-1 in Source-2 based on ATLAS')
2     ('Source-2 based on template ATLAS', 'Citation-2 in Source-2 based on ATLAS')
3     ('Source-2 based on template ATLAS', 'Citation-3 in Source-2 based on ATLAS')
4     ('Source-2 based on template ATLAS', 'Citation-4 in Source-2 based on ATLAS')
Which line should be swapped into position # 1 :

Action:		type: {CONTROL+C}
Expect:		KeyboardInterrupt
			App exists and report file displays in NotePad
			Report file:
			Header

-------------------------------------------DIV50--
Setup:		setup-attachment-prompt-RIN-#3

Action:		type: f{ENTER}
Expect:		3 events found having more than 1 attached citation.
			1    Death          : 1980           sample death detail
			2    Burial         : 30 Jan 2000
			3    Residence      : aft 2000       sample residence detail
			Which fact's citations will be re-ordered?

Action:		type: -3{ENTER}
------------------------------------------------------
To re-order citations, at each prompt, enter one of:
*  the number of the citation that should go into this slot.
* or
*  nothing    to accept current line as it is.
*  s          to accept current and following slots as they are.
*  a          to abort and make no changes.
------------------------------------------------------
1     ('Source-1 based on _test-template-1', 'Citation-1 in Source-1 based on _test-template-1')
2     ('Source-1 based on _test-template-1', 'Citation-2 in Source-1 based on _test-template-1')
Which line should be swapped into position # 1 :

Action:		type: {CONTROL+C}
Expect:		KeyboardInterrupt
			App exists and report file displays in NotePad
			Report file:
			Header


-------------------------------------------------------------------------DIV80--
6	Test Case
citation list attached to a Fact - single fact
Stop at the re-order process.

-------------------------------------------DIV50--
Setup:		setup-attachment-prompt-RIN-#4

Action:		type: f{ENTER}
Expect:		3 events found having more than 1 attached citation.
			1    Death          : 1980           sample death detail
			2    Burial         : 30 Jan 2000
			3    Residence      : aft 2000       sample residence detail
			Which fact's citations will be re-ordered?

Action:		type: 2{ENTER}
Expect:		Found one event with more than one citation.
7    :Birth
------------------------------------------------------
To re-order citations, at each prompt, enter one of:
*  the number of the citation that should go into this slot.
* or
*  nothing    to accept current line as it is.
*  s          to accept current and following slots as they are.
*  a          to abort and make no changes.
------------------------------------------------------
1     ('Source-2 based on template ATLAS', 'Citation-1 in Source-2 based on ATLAS')
2     ('Source-2 based on template ATLAS', 'Citation-2 in Source-2 based on ATLAS')
3     ('Source-2 based on template ATLAS', 'Citation-3 in Source-2 based on ATLAS')
Which line should be swapped into position # 1 :

Action:		type: {CONTROL+C}
Expect:		KeyboardInterrupt
			App exists and report file displays in NotePad
			Report file:
			Header

-------------------------------------------------------------------------DIV80--
7	Test Case
citation list attached to a Fact - ZERO facts.
Stop at the re-order process.

-------------------------------------------DIV50--
Setup:		setup-attachment-prompt-RIN-#2

Action:		type: f{ENTER}
Expect:		This person does not hae any facts with more than one citation.

Is the citation list that is to be re-ordered attached to:
a Fact (f), a Name (n) the Person (p) or skip this RIN (s)?:

Action:		type: {CONTROL+C}
Expect:		KeyboardInterrupt
			App exists and report file displays in NotePad
			Report file:
			Header












-------------------------------------------------------------------------DIV80--
8	Test Case
citation list attached to a Name - multiple names.
Stop at the re-order process.

-------------------------------------------DIV50--
Setup:		setup-attachment-prompt-RIN-#3

Action:		type: f{ENTER}
Expect:		3 events found having more than 1 attached citation.
			1    Death          : 1980           sample death detail
			2    Burial         : 30 Jan 2000
			3    Residence      : aft 2000       sample residence detail
			Which fact's citations will be re-ordered?

Action:		type: 4{ENTER}
Expect:		Enter a number 1-3
			Which fact's citations will be re-ordered?

Action:		type: 0{ENTER}
Expect:		Enter a number 1-3
			Which fact's citations will be re-ordered?

Action:		type: -2{ENTER}
Expect:		Enter a number 1-3
			Which fact's citations will be re-ordered?

Action:		type: 1.2{ENTER}
Expect:		Enter a number 1-3
			Which fact's citations will be re-ordered?

Action:		type: -q{ENTER}
Expect:		Enter a number 1-3
			Which fact's citations will be re-ordered?

Action:		type: -s{ENTER}
Expect:		Enter a number 1-3
			Which fact's citations will be re-ordered?

Action:		type: {CONTROL+C}
Expect:		KeyboardInterrupt
			App exists and report file displays in NotePad
			Report file:
			Header

-------------------------------------------DIV50--
Setup:		setup-attachment-prompt-RIN-#3

Action:		type: f{ENTER}
Expect:		3 events found having more than 1 attached citation.
			1    Death          : 1980           sample death detail
			2    Burial         : 30 Jan 2000
			3    Residence      : aft 2000       sample residence detail
			Which fact's citations will be re-ordered?

Action:		type: -1{ENTER}
Expect:		------------------------------------------------------
			To re-order citations, at each prompt, enter one of:
			*  the number of the citation that should go into this slot.
			* or
			*  nothing    to accept current line as it is.
			*  s          to accept current and following slots as they are.
			*  a          to abort and make no changes.
			------------------------------------------------------
			1     ('Source-3 based on template ATLAS', 'Citation-1 in Source-3 based on ATLAS')
			2     ('Source-3 based on template ATLAS', 'Citation-2 in Source-3 based on ATLAS')
			3     ('Source-3 based on template ATLAS', 'Citation-3 in Source-3 based on ATLAS')
			4     ('Source-2 based on template ATLAS', 'Citation-4 in Source-2 based on ATLAS')
			Which line should be swapped into position # 1 :

Action:		type: {CONTROL+C}
Expect:		KeyboardInterrupt
			App exists and report file displays in NotePad
			Report file:
			Header


-------------------------------------------DIV50--
Setup:		setup-attachment-prompt-RIN-#3

Action:		type: f{ENTER}
Expect:		3 events found having more than 1 attached citation.
			1    Death          : 1980           sample death detail
			2    Burial         : 30 Jan 2000
			3    Residence      : aft 2000       sample residence detail
			Which fact's citations will be re-ordered?

Confirm:	Birth fact is not listed.

Action:		type: -2{ENTER}
------------------------------------------------------
To re-order citations, at each prompt, enter one of:
*  the number of the citation that should go into this slot.
* or
*  nothing    to accept current line as it is.
*  s          to accept current and following slots as they are.
*  a          to abort and make no changes.
------------------------------------------------------
1     ('Source-2 based on template ATLAS', 'Citation-1 in Source-2 based on ATLAS')
2     ('Source-2 based on template ATLAS', 'Citation-2 in Source-2 based on ATLAS')
3     ('Source-2 based on template ATLAS', 'Citation-3 in Source-2 based on ATLAS')
4     ('Source-2 based on template ATLAS', 'Citation-4 in Source-2 based on ATLAS')
Which line should be swapped into position # 1 :

Action:		type: {CONTROL+C}
Expect:		KeyboardInterrupt
			App exists and report file displays in NotePad
			Report file:
			Header

-------------------------------------------DIV50--
Setup:		setup-attachment-prompt-RIN-#3

Action:		type: f{ENTER}
Expect:		3 events found having more than 1 attached citation.
			1    Death          : 1980           sample death detail
			2    Burial         : 30 Jan 2000
			3    Residence      : aft 2000       sample residence detail
			Which fact's citations will be re-ordered?

Action:		type: -3{ENTER}
------------------------------------------------------
To re-order citations, at each prompt, enter one of:
*  the number of the citation that should go into this slot.
* or
*  nothing    to accept current line as it is.
*  s          to accept current and following slots as they are.
*  a          to abort and make no changes.
------------------------------------------------------
1     ('Source-1 based on _test-template-1', 'Citation-1 in Source-1 based on _test-template-1')
2     ('Source-1 based on _test-template-1', 'Citation-2 in Source-1 based on _test-template-1')
Which line should be swapped into position # 1 :

Action:		type: {CONTROL+C}
Expect:		KeyboardInterrupt
			App exists and report file displays in NotePad
			Report file:
			Header



-------------------------------------------------------------------------DIV80--
9	Test Case
citation list attached to a Name - single name.
Stop at the re-order process.

-------------------------------------------DIV50--
Setup:		setup-attachment-prompt-RIN-#1

Action:		type: n{ENTER}
Found one name with more than one citation.
5    :                    :  alt_name-1 name-s 1
------------------------------------------------------
To re-order citations, at each prompt, enter one of:
*  the number of the citation that should go into this slot.
* or
*  nothing    to accept current line as it is.
*  s          to accept current and following slots as they are.
*  a          to abort and make no changes.
------------------------------------------------------
1     ('Source-2 based on template ATLAS', 'Citation-1 in Source-2 based on ATLAS')
2     ('Source-2 based on template ATLAS', 'Citation-2 in Source-2 based on ATLAS')
3     ('Source-2 based on template ATLAS', 'Citation-3 in Source-2 based on ATLAS')
Which line should be swapped into position # 1 :

Action:		type: {CONTROL+C}
Expect:		KeyboardInterrupt
			App exists and report file displays in NotePad
			Report file:
			Header


------------------------------------DIV80--
10	Test Case
citation list attached to a Name - ZERO names.
Stop at the re-order process.

-------------------------------------------DIV50--
Setup:		setup-attachment-prompt-RIN-#2

Action:		type: n{ENTER}
Expect:		This person does not hae any names with more than one citation.
			Is the citation list that is to be re-ordered attached to:
			a Fact (f), a Name (n) the Person (p) or skip this RIN (s)?:

Action:		type: {CONTROL+C}
Expect:		KeyboardInterrupt
			App exists and report file displays in NotePad
			Report file:
			Header















-------------------------------------------------------------------------DIV80--
NNN	Test Case
Re-order the citation list

-------------------------------------------DIV50--
Setup:		setup-attachment-prompt-RIN-#3

Action:		type: f{ENTER}
Expect:		3 events found having more than 1 attached citation.
			1    Death          : 1980           sample death detail
			2    Burial         : 30 Jan 2000
			3    Residence      : aft 2000       sample residence detail
			Which fact's citations will be re-ordered?

Action:		type: -1{ENTER}
Expect:		------------------------------------------------------
			To re-order citations, at each prompt, enter one of:
			*  the number of the citation that should go into this slot.
			* or
			*  nothing    to accept current line as it is.
			*  s          to accept current and following slots as they are.
			*  a          to abort and make no changes.
			------------------------------------------------------
			1     ('Source-3 based on template ATLAS', 'Citation-1 in Source-3 based on ATLAS')
			2     ('Source-3 based on template ATLAS', 'Citation-2 in Source-3 based on ATLAS')
			3     ('Source-3 based on template ATLAS', 'Citation-3 in Source-3 based on ATLAS')
			4     ('Source-2 based on template ATLAS', 'Citation-4 in Source-2 based on ATLAS')
			Which line should be swapped into position # 1 :

SETUP DEFINITION: The above will be called the re-order prompt.
To get here, call it re-order-prompt-RIN-#3   (the number determines the initial RIN selected).




=========================================================================DIV80==
=========================================================================DIV80==
Test Data= "TestData-Sample.rmtree" database 2025-06-128
TestData-RMpython (2025-06-28-2000).rmbackup


Persons:
1, 2, 3, 4


Person: RMID-1
Has Birth fact
Birth fact has 1 citation: 
Citation-1 in Source-1 based on _test-template-1
	in: Source-1 based on _test-template-1

Person: RMID-1
Has Death fact
	NO source
Death fact has 8 citations
	Source-2 based on template ATLAS
		Citation-1 in Source-2 based on ATLAS
		Citation-2 in Source-2 based on ATLAS
		Citation-3 in Source-2 based on ATLAS
		Citation-4 in Source-2 based on ATLAS
	Source-3 based on template ATLAS
		Citation-1 in Source-3 based on ATLAS
		Citation-2 in Source-3 based on ATLAS
		Citation-3 in Source-3 based on ATLAS
		Citation-4 in Source-3 based on ATLAS


Person 1 has only 1 fact that has multiple sources

Person 2 has no sources attached

Person 3 has 4 facts
Birth
	Citation-1 in Source-3 based on ATLAS
Residence
	Citation-1 in Source-1 based on _test-template-1
	Citation-2 in Source-1 based on _test-template-1
Death
	Citation-1 in Source-3 based on ATLAS
	Citation-2 in Source-3 based on ATLAS
	Citation-3 in Source-3 based on ATLAS
	Citation-4 in Source-2 based on ATLAS
Burial
	Citation-1 in Source-2 based on ATLAS
	Citation-2 in Source-2 based on ATLAS
	Citation-3 in Source-2 based on ATLAS
	Citation-4 in Source-2 based on ATLAS

Person 4 has 1 fact
Birth
	Citation-1 in Source-2 based on ATLAS
	Citation-2 in Source-2 based on ATLAS
	Citation-3 in Source-2 based on ATLAS



=========================================================================DIV80==
=========================================================================DIV80==


Test Cases

notes:


normal
always enter RIN and then type of attachment
f
p
n

Currently, app asks for either a FactTypeID or
blank line entry that gives a listing.
Should as for fact type name.


1	normal path:

Config
DB	normal
report name	normal
display app		notepad

Start app
Expect:		Enter the RIN of the person who has the citations to reorder:
enter:
2
Expect:		Are the citations attached to a Fact (f), a name (n) or the Person (p)?:
enter:
f
Expect:		Change made
Expect:		Change another ? y or n
CONFIRM
enter:


CONFIRM
report file-
has correct header

Has RIN entered points to

Has correct Original order list
Has correct Current order list






test cases

For facts
person has 
0
1 
>1

For names
person has 
0
1 
>1

For person
person has citation list
or does not
(only one place to look)

q s a   response
re-order proc
number, blank, s, a


RIN 4
f
no facts meet criteria
goes back to RIN entry

RIN 2
f
1 fact meet criteria
goes directly to re-order proc
has 8 citations
Source 2, Citations 4, 3, 2, 1
Source 3, Citations 4, 3, 2, 1


RIN 3 
must select f n p q
fact
3 facts meet criteria
death, burial, residence
must enter a number

death has 4 Citations
Source 3 Citations 1, 2, 3
Source 2 Citations 2

burial has 4 Citations
Source 2 Citations 1, 2, 3, 4

residence has 2 Citations
Source 1 Citations 1, 2

re-order proc is the same for all types - f, n, p

then in re-order proc
then can do a abort  quits app


